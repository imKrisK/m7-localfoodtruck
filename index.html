<!doctype html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <title>Food Truck Website 2025</title>
  </head>

  <body>
    <header class="head redesigned-header">
  <button id="mobile-menu-btn" aria-label="Open navigation" class="mobile-menu-btn">
    <i class="fas fa-bars"></i>
  </button>
  <div class="logo-title redesigned-logo-title">
    <img src="src/assets/LFTlogo.png" alt="Food Truck Logo" class="logo-img redesigned-logo-img" />
    <h1 class="site-title">Local Food <span class="brand-highlight"><i class="fas fa-truck"></i></span> Truck</h1>
  </div>
  <nav class="navbar redesigned-navbar" aria-label="Main Navigation">
    <ul id="nav-list" class="redesigned-nav-list">
      <li><a href="#home" class="nav-link">Home</a></li>
      <li><a href="#menu" class="nav-link">Menu</a></li>
      <li><a href="#about" class="nav-link">About Us</a></li>
      <li><a href="#contact" class="nav-link">Contact Us</a></li>
      <li id="nav-login"><a href="login.html" class="nav-link">Login</a></li>
      <li id="nav-register"><a href="registration.html" class="nav-link">Register</a></li>
      <li id="nav-profile" style="display:none"><a href="/profile" class="nav-link">Profile</a></li>
      <li id="nav-logout" style="display:none"><a href="#" class="nav-link">Logout</a></li>
    </ul>
  </nav>
</header>
    <script>

    // Modern mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const navList = document.getElementById('nav-list');
    if (mobileMenuBtn && navList) {
      mobileMenuBtn.addEventListener('click', function() {
        navList.classList.toggle('active');
        document.body.classList.toggle('nav-open');
      });
      navList.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          navList.classList.remove('active');
          document.body.classList.remove('nav-open');
        });
      });
    }
    </script>


    <!--Home Section-->

    <section class="home" id="home">
      <div class="inner-content">
        <h3>Welcome to Food Zone</h3>
        <p>Your one-stop destination for delicious food on wheels!</p>
        <br><a href="#menu" class="btn">Order Now</a></br>
      </div>
      <div class="inner-content-img">
          <img src="src/assets/burger.png" alt="Food Truck" />
      </div>
    </section>

  <!--about Section-->
  
  <section class="about" id="about">
    <h4>About</h4>
    <div class="about-sec">
        <div class="img">
            <img src="src/assets/menu-5.jpg" alt="img">
        </div>
        <div class="about-content">
            <h3>Food Zone</h3>
            <p>We are a food truck company dedicated to bringing you the best food on wheels. Our mission is to provide delicious, high-quality meals that are convenient and affordable.</p>
            <p>Our team of chefs is passionate about food and committed to using only the freshest ingredients. We believe that good food should be accessible to everyone, and we strive to make our menu diverse and inclusive.</p>
            <div class="about-inner">
                <h5><i class="fas fa-arrow-alt-circle-right"></i>Quality Service</h5>
                <h5><i class="fas fa-arrow-alt-circle-right"></i>Fresh Vagetables</h5>
                <h5><i class="fas fa-arrow-alt-circle-right"></i>Serving New Places</h5>
                <h5><i class="fas fa-arrow-alt-circle-right"></i>Good food, good price</h5>
                <h5><i class="fas fa-arrow-alt-circle-right"></i>Quality Cooking</h5>
            </div>

        </div>
    </div>
</section>

  <!--Service Section-->
  <section class="service" id="service">
    <h4> Services </h4>
    <div class="service-content">
      <div class="inner-box">
        <img src="src/assets/menu-6.jpg" alt="" />
        <h2>Food Service</h2>
        <p>We offer quality food and service, and experience from new places.</p>

      </div>
      <div class="inner-box">
        <img src="src/assets/m1.png" alt="" />
        <img src="src/assets/m2.png" alt="" />
        <img src="src/assets/m4.png" alt="" />
        <h3>Online Payment</h3>
        <p>Secure Payment System or cash transaction.</p>
 
      </div>
      <div class="inner-box">

        <h3>Always Fresh Food</h3>
        <p>We provide catering services for events, parties, and gatherings.</p>
  
      </div>
      </div>
    </section>

<!-- Find Us Section: Mobile Restaurant Geolocation -->
<section id="find-us" class="find-us-section" style="margin:40px auto;max-width:900px;padding:24px 0;">
  <h4 style="text-align:center;margin-bottom:12px;">Find Our Food Truck</h4>
  <div style="text-align:center;">
    <button id="show-location-btn" class="btn" style="margin-bottom:16px;">Show My Location & Truck</button>
  </div>
  <div id="map" style="width:100%;height:350px;margin-top:8px;border-radius:8px;overflow:hidden;background:#f7f7f7;text-align:center;line-height:350px;color:#888;font-size:1.1em;">Map will appear here</div>
</section>

<!--Menu Section -->

<section class="menu" id="menu">
    <h4>Our Menu</h4>
    <div class="menu-content">
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/burger.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>Waggu Burger</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/bbq-porkchop.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>BBQ Porkchop</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/burrito1.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>The Other Burrito</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/calburgerzone.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>The Cal Burger Zone</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/burrito.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>The Burr</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/spare-ribs.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>Spare Ribs</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/chickenwings.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>chicken Wings</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/4lbsburger.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>QT!</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
        <div class="in-box">
            <i class="far fa-heart"></i>
            <img src="src/assets/comb3.png" alt="img" class="veg-icon">
            <div class="in-content">
                <div class="star">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <h2>Trifecta!</h2>
                    <div class="price">$20.00</div>
                    <form class="add-to-cart-form">
                        <input type="number" name="quantity" min="1" value="1" style="width:60px; margin-right:8px;">
                        <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Mobile Restaurant Specials Section -->
<section class="specials" id="specials" style="max-width:900px;margin:40px auto 0 auto;padding:24px 0;">
  <div class="specials-content" style="display:flex;justify-content:center;align-items:center;">
    <div class="special-card" style="background:#fff;border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,0.08);padding:24px 32px;max-width:340px;width:100%;">
      <div class="special-card-inner" style="position:relative;text-align:center;">
        <img src="src/assets/LFTlogo.png" alt="Food Truck Logo" style="position:absolute;top:8px;right:8px;width:36px;height:36px;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.10);background:#fff;z-index:2;" />
        <img id="specials-rotating-img" src="src/assets/burger.png" alt="Special" style="width:160px;height:100px;max-width:100%;object-fit:cover;border-radius:8px;transition:opacity 0.5s;display:block;margin:0 auto;position:relative;z-index:1;" />
        <h4 style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:var(--clr1);padding:4px 18px 2px 18px;border-radius:16px;font-size:1.08em;margin:0;box-shadow:0 2px 8px rgba(0,0,0,0.07);z-index:3;letter-spacing:0.5px;font-weight:600;color:#111;">Join Us!!</h4>
        <h3 id="specials-rotating-title" style="margin-top:28px;">Spicy Wagyu Burger</h3>
        <p id="specials-rotating-desc" style="color:#111;">Limited time! Served with fries and a drink.</p>
        <span id="specials-rotating-price" class="special-price">$15.00</span>
        <form id="specials-add-to-cart-form" style="margin-top:16px;display:flex;justify-content:center;align-items:center;gap:8px;">
          <input type="number" name="quantity" min="1" value="1" style="width:60px;">
          <button class="btn" type="submit">Add to Cart <i class="fas fa-plus-circle"></i></button>
        </form>
      </div>
    </div>
  </div>
</section>




<!-------------------------------------------contact Section-------------->
<footer class="contact" id="contact">
  <div class="contact-sec">
      <div class="contact-inner">
          <div class="contact-inner-col">
              <img src="src/assets/LFTlogo.png" alt="img" class="image">
          </div>
          <div class="contact-inner-col">
              <h1>Contact US&nbsp;<i class="fas fa-paper-plane"></i></h1>
              <p>1000 Gobi Desert, Las Vegas, USA</p>
              <p>We Want To Hear From You, Write Us:</p>
              <form id="contact-form" action="https://formspree.io/f/meogbraw" method="POST" autocomplete="off" aria-label="Contact form">
                  <label for="contact-name" class="visually-hidden">Name</label>
                  <input type="text" name="name" id="contact-name" placeholder="Please Enter Your Name" required aria-required="true">
                  <label for="contact-email" class="visually-hidden">Email</label>
                  <input type="email" name="email" id="contact-email" placeholder="Please Enter Your @Email" required aria-required="true">
                  <label for="contact-message" class="visually-hidden">Message</label>
                  <textarea name="message" id="contact-message" cols="10" rows="8" placeholder="Your message" required aria-required="true"></textarea>
                  <input type="text" name="address" id="contact-address" placeholder="Your Location (optional)" style="margin-top:8px;">
                  <button type="button" id="contact-location-btn" style="margin:8px 0;">Use My Location</button>
                  <div id="contact-map-preview" style="margin-bottom:8px;"></div>
                  <div id="contact-feedback" style="color:green; margin:8px 0 0 0; display:none;"></div>
                  <button class="btn" type="submit">Submit</button>
              </form>
          </div>
      </div>
      <div class="map" style="margin: 24px 0;">
          <iframe src="https://www.google.com/maps?q=1000+Gobi+Desert,+Las+Vegas,+USA&output=embed" width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy" title="Our Location"></iframe>
      </div>
      <div class="copyright">
          <p>Design By&copy; imackris</p>
          <div class="social">
              <a href="https://facebook.com/yourpage" target="_blank" rel="noopener" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
              <a href="https://instagram.com/yourpage" target="_blank" rel="noopener" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
              <a href="https://pinterest.com/yourpage" target="_blank" rel="noopener" aria-label="Pinterest"><i class="fab fa-pinterest"></i></a>
              <a href="https://plus.google.com/yourpage" target="_blank" rel="noopener" aria-label="Google Plus"><i class="fab fa-google-plus"></i></a>
          </div>
      </div>
  </div>
</footer>
<script>
  let searchbtn = document.querySelector('#search');
  let searchfrm = document.querySelector('.head .search-bar');

  if (searchbtn && searchfrm) {
    searchbtn.onclick = () => {
      searchfrm.classList.toggle('active');
      if (menu) menu.classList.remove('active');
    };
  }

  let menu = document.querySelector('.head .navbar');
  let bar = document.querySelector('#bar');

  if (menu && bar) {
    bar.onclick = () => {
      menu.classList.toggle('active');
      if (searchfrm) searchfrm.classList.remove('active');
    };
  }

  window.onscroll = () => {
    if (menu) menu.classList.remove('active');
    if (searchfrm) searchfrm.classList.remove('active');
  };

  // Highlight active nav link based on scroll position
  window.addEventListener('scroll', function() {
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.nav-link');
    let current = '';
    sections.forEach(section => {
      const sectionTop = section.offsetTop - 60;
      if (pageYOffset >= sectionTop) {
        current = section.getAttribute('id');
      }
    });
    navLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === `#${current}`) {
        link.classList.add('active');
      }
    });
  });

  // --- Improved Cart UI ---
  let cart = [];
  const cartContainer = document.createElement('div');
  cartContainer.id = 'cart-container';
  cartContainer.setAttribute('role', 'region');
  cartContainer.setAttribute('aria-label', 'Shopping Cart');
  cartContainer.style.position = 'fixed';
  cartContainer.style.top = '80px';
  cartContainer.style.right = '16px';
  cartContainer.style.background = '#fff';
  cartContainer.style.border = '1.5px solid #f95b11';
  cartContainer.style.borderRadius = '8px';
  cartContainer.style.boxShadow = '0 4px 16px rgba(0,0,0,0.13)';
  cartContainer.style.padding = '16px 12px 12px 12px';
  cartContainer.style.zIndex = '1200';
  cartContainer.style.minWidth = '240px';
  cartContainer.style.maxWidth = '95vw';
  cartContainer.style.transition = 'right 0.3s';
  cartContainer.style.display = 'none';
  cartContainer.innerHTML = `
    <button id="close-cart-btn" aria-label="Close cart" style="position:absolute;top:8px;right:8px;background:none;border:none;font-size:1.5rem;cursor:pointer;color:#f95b11;">&times;</button>
    <h4 style="margin:0 0 12px 0;font-size:1.3rem;color:#f95b11;">🛒 Cart</h4>
    <ul id="cart-list" style="list-style:none;padding:0;margin:0 0 8px 0;max-height:180px;overflow-y:auto;"></ul>
    <div id="cart-total" style="font-weight:bold;margin-bottom:8px;"></div>
    <button id="clear-cart-btn" style="margin-bottom:8px;display:block;width:100%;background:#eee;color:#f95b11;border:none;padding:8px 0;border-radius:4px;">Clear Cart</button>
    <button id="checkout-btn" style="margin-bottom:8px;display:block;width:100%;background:#f95b11;color:#fff;border:none;padding:8px 0;border-radius:4px;">Checkout</button>
    <a href="checkout.html" id="checkout-link" style="display:none"></a>
  `;
  document.body.appendChild(cartContainer);

  // Show/hide cart with a floating button
  const cartToggleBtn = document.createElement('button');
  cartToggleBtn.id = 'cart-toggle-btn';
  cartToggleBtn.setAttribute('aria-label', 'Show cart');
  cartToggleBtn.innerHTML = '🛒';
  cartToggleBtn.style.position = 'fixed';
  cartToggleBtn.style.top = '90px';
  cartToggleBtn.style.right = '16px';
  cartToggleBtn.style.background = '#f95b11';
  cartToggleBtn.style.color = '#fff';
  cartToggleBtn.style.border = 'none';
  cartToggleBtn.style.borderRadius = '50%';
  cartToggleBtn.style.width = '48px';
  cartToggleBtn.style.height = '48px';
  cartToggleBtn.style.fontSize = '2rem';
  cartToggleBtn.style.zIndex = '1201';
  cartToggleBtn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.13)';
  document.body.appendChild(cartToggleBtn);

  cartToggleBtn.onclick = function() {
    cartContainer.style.display = cartContainer.style.display === 'none' ? 'block' : 'none';
  };
  document.getElementById('close-cart-btn').onclick = function() {
    cartContainer.style.display = 'none';
  };

  function updateCartUI() {
    const cartList = document.getElementById('cart-list');
    const cartTotal = document.getElementById('cart-total');
    // Always get cart from localStorage for consistency
    try { cart = JSON.parse(localStorage.getItem('checkoutCart')) || []; } catch { cart = []; }
    cartList.innerHTML = '';
    let subtotal = 0;
    cart.forEach((item, idx) => {
      const li = document.createElement('li');
      li.style.display = 'flex';
      li.style.justifyContent = 'space-between';
      li.style.alignItems = 'center';
      li.style.marginBottom = '6px';
      // Item breakdown: name, quantity, unit price, item total
      const priceNum = parseFloat(item.price.replace(/[^\d.]/g, ''));
      const itemTotal = priceNum * item.quantity;
      li.innerHTML = `<span>${item.item} x${item.quantity}</span> <span style="color:#f95b11;font-weight:600;">${item.price} ea</span> <span style="margin-left:8px;">= $${itemTotal.toFixed(2)}</span>`;
      // Remove button
      const removeBtn = document.createElement('button');
      removeBtn.textContent = '✕';
      removeBtn.style.marginLeft = '8px';
      removeBtn.style.fontSize = '1em';
      removeBtn.style.background = 'none';
      removeBtn.style.border = 'none';
      removeBtn.style.color = '#f95b11';
      removeBtn.style.cursor = 'pointer';
      removeBtn.setAttribute('aria-label', 'Remove item');
      removeBtn.onclick = function() {
        cart.splice(idx, 1);
        localStorage.setItem('checkoutCart', JSON.stringify(cart));
        updateCartUI();
      };
      li.appendChild(removeBtn);
      cartList.appendChild(li);
      subtotal += itemTotal;
    });
    // Tax calculation (8.25%)
    const taxRate = 0.0825;
    const tax = subtotal * taxRate;
    const total = subtotal + tax;
    cartTotal.innerHTML =
      `<div style='margin-bottom:2px;'>Subtotal: $${subtotal.toFixed(2)}</div>` +
      `<div style='margin-bottom:2px;'>Tax (8.25%): $${tax.toFixed(2)}</div>` +
      `<div style='font-weight:bold;'>Total: $${total.toFixed(2)}</div>`;
  }
  updateCartUI();
  document.getElementById('clear-cart-btn').onclick = function() {
    cart = [];
    localStorage.setItem('checkoutCart', JSON.stringify(cart));
    updateCartUI();
  };
  document.getElementById('checkout-btn').onclick = function() {
    if (cart.length === 0) {
      alert('Your cart is empty!');
      return;
    }
    localStorage.setItem('checkoutCart', JSON.stringify(cart));
    const orderId = 'ORD-' + Date.now().toString(36).toUpperCase();
    const order = { items: cart, orderId: orderId, date: new Date().toISOString() };
    localStorage.setItem('lastOrder', JSON.stringify(order));
    let orderHistory = [];
    try { orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || []; } catch { orderHistory = []; }
    orderHistory.push(order);
    localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
    document.getElementById('checkout-link').click();
  };
  document.querySelectorAll('.add-to-cart-form').forEach(form => {
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const inBox = form.closest('.in-box');
      const itemName = inBox.querySelector('h2').textContent;
      const price = inBox.querySelector('.price').textContent;
      const quantity = parseInt(form.querySelector('input[name="quantity"]').value, 10);
      const existingIndex = cart.findIndex(item => item.item === itemName && item.price === price);
      if (existingIndex !== -1) {
        cart[existingIndex].quantity += quantity;
      } else {
        cart.push({ item: itemName, price, quantity });
      }
      localStorage.setItem('checkoutCart', JSON.stringify(cart));
      updateCartUI();
      cartContainer.style.display = 'block';
      alert(`Added to cart:\n${itemName}\nPrice: ${price}\nQuantity: ${quantity}`);
    });
  });

  // Add to Cart for Today's Special
const specialsAddToCartForm = document.getElementById('specials-add-to-cart-form');
if (specialsAddToCartForm) {
  specialsAddToCartForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const quantity = parseInt(specialsAddToCartForm.querySelector('input[name="quantity"]').value, 10) || 1;
    const itemName = document.getElementById('specials-rotating-title').textContent;
    const price = document.getElementById('specials-rotating-price').textContent;
    let cart = [];
    try { cart = JSON.parse(localStorage.getItem('checkoutCart')) || []; } catch { cart = []; }
    const existingIndex = cart.findIndex(item => item.item === itemName && item.price === price);
    if (existingIndex !== -1) {
      cart[existingIndex].quantity += quantity;
    } else {
      cart.push({ item: itemName, price, quantity });
    }
    localStorage.setItem('checkoutCart', JSON.stringify(cart));
    if (typeof updateCartUI === 'function') updateCartUI();
    const cartContainer = document.getElementById('cart-container');
    if (cartContainer) cartContainer.style.display = 'block';
    alert(`Added to cart:\n${itemName}\nPrice: ${price}\nQuantity: ${quantity}`);
  });
}

// --- FAVORITES FEATURE FOR MENU HEART ICONS ---
const FAVORITES_KEY = 'menuFavorites';

function getFavorites() {
  try {
    return JSON.parse(localStorage.getItem(FAVORITES_KEY)) || [];
  } catch {
    return [];
  }
}

function setFavorites(favs) {
  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favs));
}

function getMenuItemName(inBox) {
  return inBox.querySelector('h2').textContent.trim();
}

function updateHeartsUI() {
  const favorites = getFavorites();
  document.querySelectorAll('.menu .in-box').forEach(inBox => {
    const heart = inBox.querySelector('.fa-heart');
    const name = getMenuItemName(inBox);
    if (favorites.includes(name)) {
      heart.classList.remove('far');
      heart.classList.add('fas', 'active');
      heart.setAttribute('aria-pressed', 'true');
      heart.setAttribute('title', 'Remove from favorites');
    } else {
      heart.classList.remove('fas', 'active');
      heart.classList.add('far');
      heart.setAttribute('aria-pressed', 'false');
      heart.setAttribute('title', 'Add to favorites');
    }
  });
}

document.querySelectorAll('.menu .in-box').forEach(inBox => {
  const heart = inBox.querySelector('.fa-heart');
  const name = getMenuItemName(inBox);
  heart.style.cursor = 'pointer';
  heart.setAttribute('tabindex', '0');
  heart.setAttribute('role', 'button');
  heart.setAttribute('aria-label', 'Toggle favorite');
  heart.addEventListener('click', function(e) {
    e.preventDefault();
    let favorites = getFavorites();
    if (favorites.includes(name)) {
      favorites = favorites.filter(f => f !== name);
    } else {
      favorites.push(name);
    }
    setFavorites(favorites);
    updateHeartsUI();
  });
  heart.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
      heart.click();
    }
  });
});

// On page load, update hearts to reflect favorites
updateHeartsUI();

// --- STAR RATING SELECTABLE FEATURE ---
document.querySelectorAll('.menu .in-box').forEach(inBox => {
  const stars = inBox.querySelectorAll('.star .fa-star');
  // Make each star focusable and clickable
  stars.forEach((star, idx) => {
    star.style.cursor = 'pointer';
    star.setAttribute('tabindex', '0');
    star.setAttribute('role', 'button');
    star.setAttribute('aria-label', `Set rating to ${idx + 1} stars`);

    // Restore rating from localStorage if present
    const itemName = inBox.querySelector('h2').textContent.trim();
    const ratingKey = `menuRating_${itemName}`;
    let savedRating = parseInt(localStorage.getItem(ratingKey), 10) || 5;
    function updateStars(rating) {
      stars.forEach((s, i) => {
        if (i < rating) {
          s.classList.add('selected');
          s.style.color = '#FFD700';
        } else {
          s.classList.remove('selected');
          s.style.color = '';
        }
      });
    }
    updateStars(savedRating);
    function setRating(rating) {
      localStorage.setItem(ratingKey, rating);
      updateStars(rating);
    }
    star.addEventListener('click', function(e) {
      setRating(idx + 1);
    });
    star.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        setRating(idx + 1);
      }
    });
  });
});

// --- NAVBAR LOGIN/LOGOUT/PROFILE DYNAMIC ---
function updateNavbarAuth() {
  const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
  document.getElementById('nav-login').style.display = isLoggedIn ? 'none' : '';
  document.getElementById('nav-register').style.display = isLoggedIn ? 'none' : '';
  document.getElementById('nav-profile').style.display = isLoggedIn ? '' : 'none';
  document.getElementById('nav-logout').style.display = isLoggedIn ? '' : 'none';
}
document.getElementById('nav-logout').addEventListener('click', function(e) {
  e.preventDefault();
  localStorage.removeItem('isLoggedIn');
  window.location.href = 'login.html';
});
updateNavbarAuth();
// --- END NAVBAR DYNAMIC ---

// --- Rotating Specials Image ---
const specials = [
  {
    img: 'src/assets/burger.png',
    title: 'Spicy Wagyu Burger',
    desc: 'Limited time! Served with fries and a drink.',
    price: '$15.00'
  },
  {
    img: 'src/assets/bbq-porkchop.png',
    title: 'BBQ Porkchop Plate',
    desc: 'Char-grilled porkchop with house BBQ sauce.',
    price: '$14.00'
  },
  {
    img: 'src/assets/burrito1.png',
    title: "Wally's Special Burrito",
    desc: 'Loaded with beef, beans, and cheese. Only today!',
    price: '$12.00'
  }
];
let specialIdx = 0;
function showSpecial(idx) {
  const img = document.getElementById('specials-rotating-img');
  const title = document.getElementById('specials-rotating-title');
  const desc = document.getElementById('specials-rotating-desc');
  const price = document.getElementById('specials-rotating-price');
  if (!img || !title || !desc || !price) return;
  img.style.opacity = 0;
  setTimeout(() => {
    img.src = specials[idx].img;
    title.textContent = specials[idx].title;
    desc.textContent = specials[idx].desc;
    price.textContent = specials[idx].price;
    img.style.opacity = 1;
  }, 300);
}
setInterval(() => {
  specialIdx = (specialIdx + 1) % specials.length;
  showSpecial(specialIdx);
}, 4000);
window.addEventListener('DOMContentLoaded', () => showSpecial(0));

// --- Find Us Section: Mobile Restaurant Geolocation ---
document.getElementById('show-location-btn').onclick = function() {
  const mapDiv = document.getElementById('map');
  if (!navigator.geolocation) {
    mapDiv.innerHTML = '<div style="color:#d9534f;">Geolocation is not supported by your browser.</div>';
    return;
  }
  mapDiv.innerHTML = 'Locating…';
  navigator.geolocation.getCurrentPosition(function(position) {
    const userLat = position.coords.latitude;
    const userLng = position.coords.longitude;
    // Example: Las Vegas truck location
    const truckLat = 36.1699;
    const truckLng = -115.1398;
    // Show both user and truck on OpenStreetMap
    const mapUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${Math.min(userLng,truckLng)-0.01},${Math.min(userLat,truckLat)-0.01},${Math.max(userLng,truckLng)+0.01},${Math.max(userLat,truckLat)+0.01}&layer=mapnik&marker=${truckLat},${truckLng}`;
    mapDiv.innerHTML = `
      <iframe width="100%" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="${mapUrl}"></iframe>
      <div style="font-size:0.95em;margin-top:8px;text-align:left;padding:0 8px;">
        <b>Your Location:</b> ${userLat.toFixed(5)}, ${userLng.toFixed(5)}<br>
        <b>Truck Location:</b> ${truckLat}, ${truckLng}
      </div>
    `;
  }, function() {
    mapDiv.innerHTML = '<div style="color:#d9534f;">Unable to retrieve your location.</div>';
  });
};
</script>
</body>
</html>

